{% extends "index/base.html" %}
{% load static %}
{% block title_name %}
<title>All {{ title }}</title>
{% endblock title_name %}
{% block body_block %}
<br>
<div class="span12">
      <div class="hero-unit">
        <div class="hero-unit">
          <span>
            <h3 style="margin-left:15px">All {{ title }}</h3>
          </span>
        </div>
      </div>
    </div>
<div class="modal-body">
  <br>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>title</th>
        {% if list_type == "announce" %}
        <th>announce content</th>
        {% else %}
        <th>start time</th>
        <th>end time</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for archive in data_list %}
      <tr>
        <td>{{ archive.id }}</td>
        {% if list_type == 'runContest'%}
          <td>
            <a href="{% url 'contest:contest' archive.id %}">
              {{ archive.cname }}
            </a>
          </td>
          <td>{{ archive.start_time|date:"Y/m/d H:i:s" }}</td>
          <td>{{ archive.end_time|date:"Y/m/d H:i:s" }}</td>
        {% elif list_type == 'endContest'%}
          <td>
            <a href="{% url 'contest:contest' archive.id %}">
              {{ archive.cname }}
            </a>
          </td>
          <td>{{ archive.start_time|date:"Y/m/d H:i:s" }}</td>
          <td>{{ archive.end_time|date:"Y/m/d H:i:s" }}</td>
        {% else %}
        <td>{{ archive.title }}</td>
        <td>{{ archive.content }}</td>
        <td>
          {% if user_has_no_auth %}
            <td>
              <a href="" class="btn btn-sm btn-default" 
                 data-toggle="modal"
                 data-target="#announceContentModal"
                 style="float:right">Detail</a>
              <!--Modal Section-->
              <div class="modal fade" id="announceContentModal"
                 role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="btn-default" class="close" data-dismiss="modal"
                              aria-hidden="true">&times;</button>
                      <h3 class="modal-title" id="modal-title" title="{{ archive.title}}">
                        {{ archive.title|truncatechars:25 }}
                      </h3>
                    </div> 
                    <div class="modal-body">
                      <p id="modal-content" style="word-wrap:break-word">
                        {{ archive.content }}
                      </p>
                    </div>
                    <div class="modal-footer">
                      <div class="col-lg-offset-10 col-lg-1">
                        <button type="button" class="btn btn-default" data-dismiss="modal">
                          Close
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--Modal Section End-->
            </td>
            {% else %}
            <td>
              <a href="{% url 'group:edit_announce' archive.id group_id redirect_id %}">
                <button type="button" class="btn btn-warning btn-sm" 
                        data-toggle="modal" style="float:right">
                  Edit
                </button>
              </a>
            </td>
          {% endif %}
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <nav>
    {% include "utils/pager.html" with objects=data_list %}
  </nav>
</div>
<!--Modal Section-->
<div class="modal fade" id="announceContentModal"
   role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="btn-default" class="close" data-dismiss="modal"
                aria-hidden="true">&times;</button>
        <h3 class="modal-title" id="modal-title"></h3>
      </div> 
      <div class="modal-body">
        <p id="modal-content" style="word-wrap:break-word"></p>
      </div>
      <div class="modal-footer">
        <div class="col-lg-offset-10 col-lg-1">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--Modal Section End-->
{% endblock body_block %}
